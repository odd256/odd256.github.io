---
title: Digital Garden æ­å»ºæ–¹æ³•
tags:
  - Writing
publish: true
created: 2023-02-26 16:00:00
updated: 2024-03-01 12:02:40
---

# hexo ç”Ÿæˆåšå®¢

1. åšå®¢ç”± Hexo ç”Ÿæˆå¹¶éƒ¨ç½²åœ¨**github**ï¼ˆç›¸å…³éƒ¨ç½²æ–¹æ³•å·²ç»æœ‰å¾ˆå¤šï¼Œè¿™é‡Œä¸èµ˜è¿°ï¼‰
2. åšå®¢ä¸»é¢˜ï¼šhexo-next
3. è¯„è®ºæ’ä»¶ï¼šgitalkï¼ˆå¦‚æœä½ æ— æ³•æŸ¥çœ‹è¯„è®ºï¼Œå¯èƒ½æ˜¯å› ä¸º**ä½ æ— æ³•è®¿é—®github**ï¼‰
4. åšå®¢æ’°å†™ï¼šObsidian
5. é™æ€å›¾ç‰‡èµ„æºå­˜å‚¨ï¼šè…¾è®¯äº‘ OSS å­˜å‚¨

æˆ‘å°†æ–‡ç« åˆ†æˆäº†ä¸¤ä¸ªéƒ¨åˆ†ï¼Œ`notebook` å’Œ `quartz` ä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼Œåˆ†åˆ«ä¿å­˜äº†æˆ‘åŸå§‹çš„æ–‡ç« å’Œéœ€è¦å‘å¸ƒçš„æ–‡ç« ï¼Œåœ¨ Obsidian ä¸­ç¼–è¾‘å®Œï¼Œåªéœ€è¦å°†æ–‡ä»¶å¤åˆ¶åˆ° `quartz/content` ä¸­å³å¯å®Œæˆå‘å¸ƒï¼Œè¿™é‡Œå¯ä»¥å€ŸåŠ©[Obsidian æ’ä»¶](Obsidian%20é£Ÿç”¨æŒ‡åŒ—.md#^f10318)è¿›è¡Œä¸€é”®æ’å…¥ ^531d74

åšå®¢çš„åˆ›å»ºéœ€è¦è·å–ç¬”è®° metadata ä¿¡æ¯ï¼ˆåŒ…æ‹¬ç¬”è®°æ ‡é¢˜ã€åˆ›å»ºæ—¶é—´ã€æ›´æ–°æ—¶é—´ã€æ ‡ç­¾ç­‰ï¼‰ï¼ŒObsidian é»˜è®¤æ˜¯æ²¡æœ‰è¿™äº› metadata ä¿¡æ¯çš„ï¼Œå› æ­¤æˆ‘å€ŸåŠ©äº†[Obsidian æ’ä»¶](Obsidian%20é£Ÿç”¨æŒ‡åŒ—.md#^a33f83)å®ç°äº†è¿™ä¸€åŠŸèƒ½

åœ¨ä½¿ç”¨ **hexo** æ­å»ºåšå®¢æ—¶ï¼Œæˆ‘å‘ç°äº†å‡ ä¸ªç¼ºé™·ï¼š
1. Obsidian çš„åŒé“¾åŠŸèƒ½æ— æ³•åœ¨åšå®¢ä¸­å±•ç¤º
2. Obsidian callout æ— æ³•åœ¨åšå®¢ä¸­å±•ç¤ºï¼Œç¼ºå°‘å¯¹åº” css

# quartz ç”Ÿæˆ Digital Garden

ä¸ºäº†èƒ½å¤Ÿæ›´å¥½åœ°åˆ©ç”¨ Obsidian çš„ç‰¹æ€§ï¼Œæˆ‘å†³å®šæ”¹å˜åšå®¢æ­å»ºçš„æ¶æ„ï¼Œè½¬å‘ [quartz](https://github.com/jackyzha0/quartz)ï¼ˆå…¶å®æ˜¯è‡ªå·±å¤ªèœğŸ˜­ï¼Œæ²¡åŠæ³•è‡ªå·±å†™æ’ä»¶è§£å†³ä¸Šé¢æåˆ°çš„é—®é¢˜ï¼‰

quartz å¯¹ Obsidian çš„æ”¯æŒåº¦å¾ˆé«˜ï¼ŒåŒæ—¶æ”¯æŒ Obsidian ä¸­çš„ `graph view` å’Œ `backlink` åŠŸèƒ½ï¼ŒåŸºæœ¬åŸç†å’Œ hexo ç±»ä¼¼ï¼Œéƒ½æ˜¯é€šè¿‡å¯¹ç¬”è®°å¤„ç†ï¼Œç”Ÿæˆé™æ€ç½‘é¡µè¿›è¡Œå‘å¸ƒï¼Œä½¿ç”¨ GitHub Pages åŠŸèƒ½å¯ä»¥ç›´æ¥è¿›è¡Œåšå®¢çš„éƒ¨ç½²ï¼Œä¸è¿‡éœ€è¦æ³¨æ„ï¼Œé»˜è®¤ä¼šæŠŠæ‰€æœ‰æ–‡ä»¶éƒ½æ”¾åˆ° git ä¸‹è¿›è¡Œç®¡ç†ï¼Œå› æ­¤å¦‚æœä½ æœ‰ç§å¯†çš„ç¬”è®°ï¼Œè¿˜æ˜¯å»ºè®®ä½ å¦‚ä¸Š[å‘å¸ƒæ–¹æ³•](#^531d74)è¿›è¡Œåˆ†å¼€ç®¡ç†

quartz çš„ Componentï¼ˆç»„ä»¶ï¼‰ ä½¿ç”¨ï¼š
1. **umamiï¼ˆæµé‡ç›‘æ§ï¼‰**ï¼Œä¸ºäº†ç›‘æ§ Digital Garden çš„æµé‡ä¿¡æ¯ï¼Œæˆ‘é‡‡ç”¨äº†å…è´¹å¼€æºçš„ umami è¿›è¡Œæ•°æ®ç›‘æ§ï¼Œç›¸å…³é…ç½®ä¿¡æ¯å¯ä»¥å‚è€ƒ [Configuration (jzhao.xyz)](https://quartz.jzhao.xyz/configuration)
2. **giscusï¼ˆè¯„è®ºç³»ç»Ÿï¼‰**ï¼Œè¯„è®ºéƒ¨åˆ†ä½¿ç”¨äº† giscus ä½œä¸ºè¯„è®ºç³»ç»Ÿï¼Œå‰ç«¯æŒ‚è½½åœ¨ `<div class="giscus"></div>` ä¸‹ï¼Œå®ƒä¼šæŠŠ github çš„ discussions ä½œä¸ºè¯„è®ºçš„å­˜å‚¨ç©ºé—´ï¼Œç”¨æˆ·è¯„è®ºéœ€è¦ç™»å½• github å¹¶é€šè¿‡ giscus app è¿›è¡Œä»£ç†å®ç°è¯„è®ºåŠŸèƒ½ï¼Œè¯¦ç»†é…ç½®å¯å‚è€ƒ[giscus](https://giscus.app/zh-CN)

è‡ªå®šä¹‰ Comments ç»„ä»¶ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š
```typescript
// quartz/components/Comments.tsx
import commentsScript from "./scripts/comments.inline"
import { QuartzComponentConstructor, QuartzComponent, QuartzComponentProps } from "./types"

const Comment: QuartzComponent = ({ displayClass, cfg }: QuartzComponentProps) => {

  return (
    <script src="https://giscus.app/client.js"
      data-repo="odd256/odd256.github.io"
      data-repo-id="R_kgDOLX95UQ"
      data-category="Announcements"
      data-category-id="DIC_kwDOLX95Uc4CdlNe"
      data-mapping="pathname"
      data-strict="0"
      data-reactions-enabled="1"
      data-emit-metadata="0"
      data-input-position="top"
      data-theme="light"
      data-lang="zh-CN"
      data-loading="lazy"
      crossorigin="anonymous"
      async>
    </script>
  )
}

Comment.beforeDOMLoaded = commentsScript
export default (() => Comment) satisfies QuartzComponentConstructor
```

```typescript
// quartz/components/scripts/comments.inline.ts
// ä¸ºäº†å®ç°åŠ¨æ€é¢œè‰²åˆ‡æ¢ï¼Œå¿…é¡»é‡æ„éƒ¨åˆ†æ ·å¼
function sendMessage(message: { setConfig: { theme: string } }) {
    const iframe = document.querySelector('iframe.giscus-frame') as HTMLIFrameElement;
    if (!iframe) return;
    iframe.contentWindow?.postMessage({ giscus: message }, 'https://giscus.app');
}
document.addEventListener("themechange", (e) => {
    const theme = e.detail.theme === 'light' ? 'light' : 'dark'

    sendMessage({
        setConfig: {
            theme: theme
        }
    });
})

// first-time loaded
document.addEventListener("DOMContentLoaded", () => {
    const userPref = window.matchMedia("(prefers-color-scheme: light)").matches ? "light" : "dark"
    const currentTheme = localStorage.getItem("theme") ?? userPref
    if (currentTheme === "dark") {return} // default is dark theme
  
    const theme = currentTheme === "light" ? "light_protanopia" : "dark_protanopia"
  
    const existingGiscusContainer = document.getElementById('giscus-container');
  
    if (existingGiscusContainer) {
      // Remove the existing Giscus instance
      existingGiscusContainer.innerHTML = '';
    }
  
    // Create a new container element for Giscus
    const newGiscusContainer = document.createElement('div');
    newGiscusContainer.id = 'giscus-container';
    document.body.appendChild(newGiscusContainer);
    
    // Create a new script element with the updated data-theme attribute
    const newScript = document.createElement('script');
    newScript.src = 'https://giscus.app/client.js';
    newScript.setAttribute('data-repo', 'odd256/odd256.github.io');
    newScript.setAttribute('data-repo-id', 'R_kgDOLX95UQ');
    newScript.setAttribute('data-category', 'Announcements');
    newScript.setAttribute('data-category-id', 'DIC_kwDOLX95Uc4CdlNe');
    newScript.setAttribute('data-mapping', 'pathname');
    newScript.setAttribute('data-strict', '0');
    newScript.setAttribute('data-reactions-enabled', '1');
    newScript.setAttribute('data-emit-metadata', '0');
    newScript.setAttribute('data-input-position', 'top');
    newScript.setAttribute('data-theme', theme);
    newScript.setAttribute('data-lang', 'zh-CN');
    newScript.setAttribute('data-loading', 'lazy');
    newScript.setAttribute('crossOrigin', 'anonymous');
    newScript.async = true;
  
    // Append the new script to the Giscus container
    newGiscusContainer.appendChild(newScript);
  })
```

æœ€ååœ¨ `quartz.layout.ts` æ–‡ä»¶ä¸­æ·»åŠ è‡ªå®šä¹‰çš„ Comments ç»„ä»¶å³å¯